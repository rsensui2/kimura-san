<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>GMAPè©¦é¨“å¯¾ç­–å•é¡Œé›†ã‚¢ãƒ—ãƒª - ãƒ¢ãƒƒã‚¯</title>
  <style>
    /* ===== Reset & Base ===== */
    *, *::before, *::after {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    :root {
      --primary: #4F46E5;
      --primary-light: #818CF8;
      --primary-dark: #3730A3;
      --primary-bg: #EEF2FF;
      --success: #10B981;
      --success-bg: #D1FAE5;
      --danger: #EF4444;
      --danger-bg: #FEE2E2;
      --warning: #F59E0B;
      --warning-bg: #FEF3C7;
      --gray-50: #F9FAFB;
      --gray-100: #F3F4F6;
      --gray-200: #E5E7EB;
      --gray-300: #D1D5DB;
      --gray-400: #9CA3AF;
      --gray-500: #6B7280;
      --gray-600: #4B5563;
      --gray-700: #374151;
      --gray-800: #1F2937;
      --gray-900: #111827;
      --radius: 12px;
      --radius-lg: 16px;
      --radius-xl: 20px;
      --shadow: 0 1px 3px rgba(0,0,0,0.1), 0 1px 2px rgba(0,0,0,0.06);
      --shadow-md: 0 4px 6px -1px rgba(0,0,0,0.1), 0 2px 4px -1px rgba(0,0,0,0.06);
      --shadow-lg: 0 10px 15px -3px rgba(0,0,0,0.1), 0 4px 6px -2px rgba(0,0,0,0.05);
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Hiragino Sans', 'Noto Sans JP', sans-serif;
      background: #1a1a2e;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      padding: 20px;
      -webkit-font-smoothing: antialiased;
    }

    /* ===== Phone Frame ===== */
    .phone-frame {
      width: 375px;
      height: 812px;
      background: #fff;
      border-radius: 40px;
      overflow: hidden;
      position: relative;
      box-shadow: 
        0 0 0 2px #333,
        0 0 0 5px #1a1a1a,
        0 0 0 7px #333,
        0 25px 50px rgba(0,0,0,0.5);
    }

    .phone-notch {
      position: absolute;
      top: 0;
      left: 50%;
      transform: translateX(-50%);
      width: 150px;
      height: 30px;
      background: #000;
      border-radius: 0 0 20px 20px;
      z-index: 100;
    }

    .phone-notch::after {
      content: '';
      position: absolute;
      top: 8px;
      left: 50%;
      transform: translateX(-50%);
      width: 60px;
      height: 6px;
      background: #333;
      border-radius: 3px;
    }

    .phone-screen {
      width: 100%;
      height: 100%;
      overflow: hidden;
      position: relative;
      background: var(--gray-50);
    }

    /* ===== Status Bar ===== */
    .status-bar {
      height: 50px;
      background: transparent;
      display: flex;
      justify-content: space-between;
      align-items: flex-end;
      padding: 0 24px 6px;
      font-size: 12px;
      font-weight: 600;
      color: #000;
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      z-index: 90;
    }

    .status-bar.light {
      color: #fff;
    }

    .status-bar-right {
      display: flex;
      gap: 5px;
      align-items: center;
    }

    /* ===== Screen System ===== */
    .screen {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.35s ease, transform 0.35s ease;
      transform: translateX(30px);
      overflow-y: auto;
      overflow-x: hidden;
      -webkit-overflow-scrolling: touch;
    }

    .screen.active {
      opacity: 1;
      visibility: visible;
      transform: translateX(0);
    }

    .screen.slide-out-left {
      opacity: 0;
      transform: translateX(-30px);
    }

    /* ===== Splash Screen ===== */
    #splash {
      background: linear-gradient(135deg, #4F46E5 0%, #7C3AED 50%, #A855F7 100%);
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      color: #fff;
      overflow: hidden;
    }

    .splash-icon {
      width: 100px;
      height: 100px;
      background: rgba(255,255,255,0.2);
      border-radius: 24px;
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 48px;
      margin-bottom: 24px;
      animation: splashBounce 1s ease-out;
      backdrop-filter: blur(10px);
    }

    @keyframes splashBounce {
      0% { transform: scale(0.3); opacity: 0; }
      60% { transform: scale(1.1); }
      100% { transform: scale(1); opacity: 1; }
    }

    .splash-title {
      font-size: 28px;
      font-weight: 800;
      letter-spacing: -0.5px;
      animation: fadeInUp 0.8s ease-out 0.3s both;
    }

    .splash-subtitle {
      font-size: 14px;
      opacity: 0.85;
      margin-top: 8px;
      animation: fadeInUp 0.8s ease-out 0.5s both;
    }

    .splash-loader {
      margin-top: 48px;
      width: 40px;
      height: 40px;
      border: 3px solid rgba(255,255,255,0.3);
      border-top-color: #fff;
      border-radius: 50%;
      animation: spin 0.8s linear infinite;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    @keyframes fadeInUp {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    /* ===== Home Screen ===== */
    #home {
      background: var(--gray-50);
    }

    .home-header {
      background: linear-gradient(135deg, #4F46E5 0%, #7C3AED 100%);
      padding: 60px 24px 32px;
      color: #fff;
      border-radius: 0 0 24px 24px;
    }

    .home-greeting {
      font-size: 14px;
      opacity: 0.85;
    }

    .home-name {
      font-size: 24px;
      font-weight: 700;
      margin-top: 4px;
    }

    .home-stats {
      display: flex;
      gap: 12px;
      margin-top: 20px;
    }

    .stat-card {
      flex: 1;
      background: rgba(255,255,255,0.15);
      backdrop-filter: blur(10px);
      border-radius: var(--radius);
      padding: 12px;
      text-align: center;
    }

    .stat-value {
      font-size: 22px;
      font-weight: 700;
    }

    .stat-label {
      font-size: 11px;
      opacity: 0.85;
      margin-top: 2px;
    }

    .home-body {
      padding: 24px;
    }

    .section-title {
      font-size: 16px;
      font-weight: 700;
      color: var(--gray-800);
      margin-bottom: 12px;
    }

    .daily-card {
      background: linear-gradient(135deg, #FEF3C7 0%, #FDE68A 100%);
      border-radius: var(--radius-lg);
      padding: 20px;
      margin-bottom: 24px;
      display: flex;
      align-items: center;
      gap: 16px;
      cursor: pointer;
      transition: transform 0.2s;
    }

    .daily-card:active {
      transform: scale(0.97);
    }

    .daily-icon {
      font-size: 40px;
    }

    .daily-content h3 {
      font-size: 15px;
      font-weight: 700;
      color: var(--gray-800);
    }

    .daily-content p {
      font-size: 12px;
      color: var(--gray-600);
      margin-top: 4px;
    }

    .daily-badge {
      margin-left: auto;
      background: var(--warning);
      color: #fff;
      font-size: 11px;
      font-weight: 700;
      padding: 4px 10px;
      border-radius: 20px;
    }

    /* ===== Category Cards ===== */
    .category-list {
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .category-card {
      background: #fff;
      border-radius: var(--radius-lg);
      padding: 18px 20px;
      display: flex;
      align-items: center;
      gap: 14px;
      cursor: pointer;
      transition: transform 0.2s, box-shadow 0.2s;
      box-shadow: var(--shadow);
    }

    .category-card:active {
      transform: scale(0.97);
      box-shadow: var(--shadow-md);
    }

    .category-icon {
      width: 48px;
      height: 48px;
      border-radius: var(--radius);
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 24px;
      flex-shrink: 0;
    }

    .category-info {
      flex: 1;
    }

    .category-name {
      font-size: 15px;
      font-weight: 600;
      color: var(--gray-800);
    }

    .category-meta {
      font-size: 12px;
      color: var(--gray-500);
      margin-top: 3px;
    }

    .category-progress {
      width: 100%;
      height: 4px;
      background: var(--gray-200);
      border-radius: 2px;
      margin-top: 8px;
      overflow: hidden;
    }

    .category-progress-fill {
      height: 100%;
      border-radius: 2px;
      transition: width 0.5s ease;
    }

    .category-arrow {
      color: var(--gray-400);
      font-size: 18px;
    }

    /* ===== Quiz Setup Screen ===== */
    #quiz-setup {
      background: var(--gray-50);
    }

    .screen-header {
      display: flex;
      align-items: center;
      padding: 56px 16px 16px;
      gap: 8px;
    }

    .back-btn {
      width: 36px;
      height: 36px;
      border-radius: 50%;
      border: none;
      background: var(--gray-100);
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 18px;
      cursor: pointer;
      transition: background 0.2s;
      flex-shrink: 0;
    }

    .back-btn:active {
      background: var(--gray-200);
    }

    .screen-header-title {
      font-size: 17px;
      font-weight: 600;
      color: var(--gray-800);
    }

    .setup-body {
      padding: 8px 24px 24px;
    }

    .setup-category-header {
      text-align: center;
      padding: 16px 0 24px;
    }

    .setup-category-icon {
      width: 72px;
      height: 72px;
      border-radius: 20px;
      margin: 0 auto 12px;
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 36px;
    }

    .setup-category-name {
      font-size: 20px;
      font-weight: 700;
      color: var(--gray-800);
    }

    .setup-category-desc {
      font-size: 13px;
      color: var(--gray-500);
      margin-top: 6px;
    }

    .setup-options {
      display: flex;
      flex-direction: column;
      gap: 12px;
      margin-bottom: 24px;
    }

    .setup-option {
      background: #fff;
      border-radius: var(--radius);
      padding: 16px;
      box-shadow: var(--shadow);
    }

    .setup-option-title {
      font-size: 13px;
      font-weight: 600;
      color: var(--gray-700);
      margin-bottom: 10px;
    }

    .option-chips {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
    }

    .option-chip {
      padding: 8px 16px;
      border-radius: 20px;
      border: 1.5px solid var(--gray-200);
      background: #fff;
      font-size: 13px;
      font-weight: 500;
      color: var(--gray-600);
      cursor: pointer;
      transition: all 0.2s;
    }

    .option-chip.selected {
      background: var(--primary);
      color: #fff;
      border-color: var(--primary);
    }

    .start-btn {
      width: 100%;
      padding: 16px;
      background: var(--primary);
      color: #fff;
      border: none;
      border-radius: var(--radius);
      font-size: 16px;
      font-weight: 700;
      cursor: pointer;
      transition: background 0.2s, transform 0.1s;
    }

    .start-btn:active {
      background: var(--primary-dark);
      transform: scale(0.98);
    }

    /* ===== Quiz Screen ===== */
    #quiz {
      background: #fff;
      display: flex;
      flex-direction: column;
    }

    .quiz-header {
      padding: 56px 20px 12px;
      background: #fff;
      border-bottom: 1px solid var(--gray-100);
      flex-shrink: 0;
    }

    .quiz-top-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 12px;
    }

    .quiz-progress-text {
      font-size: 13px;
      font-weight: 600;
      color: var(--gray-500);
    }

    .quiz-timer {
      font-size: 13px;
      color: var(--gray-500);
      display: flex;
      align-items: center;
      gap: 4px;
    }

    .quiz-progress-bar {
      width: 100%;
      height: 6px;
      background: var(--gray-100);
      border-radius: 3px;
      overflow: hidden;
    }

    .quiz-progress-fill {
      height: 100%;
      background: var(--primary);
      border-radius: 3px;
      transition: width 0.4s ease;
    }

    .quiz-close-btn {
      width: 32px;
      height: 32px;
      border-radius: 50%;
      border: none;
      background: var(--gray-100);
      font-size: 16px;
      cursor: pointer;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    .quiz-body {
      flex: 1;
      overflow-y: auto;
      padding: 24px 20px;
      display: flex;
      flex-direction: column;
    }

    .question-category-tag {
      display: inline-block;
      font-size: 11px;
      font-weight: 600;
      color: var(--primary);
      background: var(--primary-bg);
      padding: 4px 10px;
      border-radius: 20px;
      margin-bottom: 12px;
    }

    .question-text {
      font-size: 16px;
      font-weight: 600;
      color: var(--gray-800);
      line-height: 1.6;
      margin-bottom: 24px;
    }

    .answer-options {
      display: flex;
      flex-direction: column;
      gap: 10px;
      flex: 1;
    }

    .answer-option {
      padding: 14px 16px;
      border: 2px solid var(--gray-200);
      border-radius: var(--radius);
      font-size: 14px;
      line-height: 1.5;
      color: var(--gray-700);
      cursor: pointer;
      transition: all 0.2s;
      display: flex;
      align-items: flex-start;
      gap: 10px;
      background: #fff;
    }

    .answer-option:active {
      transform: scale(0.98);
    }

    .answer-option.selected {
      border-color: var(--primary);
      background: var(--primary-bg);
      color: var(--primary-dark);
    }

    .answer-option.correct {
      border-color: var(--success);
      background: var(--success-bg);
      color: #065F46;
    }

    .answer-option.incorrect {
      border-color: var(--danger);
      background: var(--danger-bg);
      color: #991B1B;
    }

    .answer-label {
      width: 24px;
      height: 24px;
      border-radius: 50%;
      background: var(--gray-100);
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 12px;
      font-weight: 700;
      flex-shrink: 0;
      transition: all 0.2s;
    }

    .answer-option.selected .answer-label {
      background: var(--primary);
      color: #fff;
    }

    .answer-option.correct .answer-label {
      background: var(--success);
      color: #fff;
    }

    .answer-option.incorrect .answer-label {
      background: var(--danger);
      color: #fff;
    }

    .quiz-footer {
      padding: 16px 20px;
      padding-bottom: max(16px, env(safe-area-inset-bottom));
      background: #fff;
      border-top: 1px solid var(--gray-100);
      flex-shrink: 0;
    }

    .next-btn {
      width: 100%;
      padding: 14px;
      border: none;
      border-radius: var(--radius);
      font-size: 15px;
      font-weight: 700;
      cursor: pointer;
      transition: all 0.2s;
    }

    .next-btn.primary {
      background: var(--primary);
      color: #fff;
    }

    .next-btn.primary:active {
      background: var(--primary-dark);
    }

    .next-btn:disabled {
      background: var(--gray-200);
      color: var(--gray-400);
      cursor: not-allowed;
    }

    /* ===== Answer Feedback ===== */
    .feedback-banner {
      padding: 12px 16px;
      border-radius: var(--radius);
      margin-top: 16px;
      display: none;
      align-items: center;
      gap: 10px;
      animation: fadeInUp 0.3s ease-out;
    }

    .feedback-banner.show {
      display: flex;
    }

    .feedback-banner.correct {
      background: var(--success-bg);
      color: #065F46;
    }

    .feedback-banner.incorrect {
      background: var(--danger-bg);
      color: #991B1B;
    }

    .feedback-icon {
      font-size: 24px;
    }

    .feedback-text {
      font-size: 14px;
      font-weight: 600;
    }

    /* ===== Result Screen ===== */
    #result {
      background: var(--gray-50);
    }

    .result-header {
      background: linear-gradient(135deg, #4F46E5 0%, #7C3AED 100%);
      padding: 60px 24px 40px;
      text-align: center;
      color: #fff;
      border-radius: 0 0 32px 32px;
    }

    .result-emoji {
      font-size: 56px;
      margin-bottom: 12px;
      animation: splashBounce 0.6s ease-out;
    }

    .result-title {
      font-size: 22px;
      font-weight: 800;
    }

    .result-score {
      font-size: 48px;
      font-weight: 800;
      margin: 12px 0 4px;
    }

    .result-score-label {
      font-size: 14px;
      opacity: 0.85;
    }

    .result-body {
      padding: 24px;
    }

    .result-stats {
      display: flex;
      gap: 12px;
      margin-bottom: 24px;
    }

    .result-stat {
      flex: 1;
      background: #fff;
      border-radius: var(--radius);
      padding: 16px;
      text-align: center;
      box-shadow: var(--shadow);
    }

    .result-stat-value {
      font-size: 24px;
      font-weight: 700;
    }

    .result-stat-value.correct-color { color: var(--success); }
    .result-stat-value.incorrect-color { color: var(--danger); }
    .result-stat-value.time-color { color: var(--primary); }

    .result-stat-label {
      font-size: 11px;
      color: var(--gray-500);
      margin-top: 4px;
    }

    .result-questions-title {
      font-size: 15px;
      font-weight: 700;
      color: var(--gray-800);
      margin-bottom: 12px;
    }

    .result-question-list {
      display: flex;
      flex-direction: column;
      gap: 8px;
      margin-bottom: 24px;
    }

    .result-question-item {
      background: #fff;
      border-radius: var(--radius);
      padding: 14px 16px;
      display: flex;
      align-items: center;
      gap: 12px;
      box-shadow: var(--shadow);
      cursor: pointer;
      transition: transform 0.2s;
    }

    .result-question-item:active {
      transform: scale(0.98);
    }

    .rq-status {
      width: 28px;
      height: 28px;
      border-radius: 50%;
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 14px;
      flex-shrink: 0;
    }

    .rq-status.correct {
      background: var(--success-bg);
    }

    .rq-status.incorrect {
      background: var(--danger-bg);
    }

    .rq-text {
      flex: 1;
      font-size: 13px;
      color: var(--gray-700);
      line-height: 1.4;
      display: -webkit-box;
      -webkit-line-clamp: 2;
      -webkit-box-orient: vertical;
      overflow: hidden;
    }

    .rq-arrow {
      color: var(--gray-400);
      font-size: 16px;
    }

    .result-actions {
      display: flex;
      flex-direction: column;
      gap: 10px;
      padding-bottom: 40px;
    }

    .result-btn {
      width: 100%;
      padding: 14px;
      border-radius: var(--radius);
      font-size: 15px;
      font-weight: 700;
      cursor: pointer;
      transition: all 0.2s;
      text-align: center;
      border: none;
    }

    .result-btn.primary {
      background: var(--primary);
      color: #fff;
    }

    .result-btn.secondary {
      background: #fff;
      color: var(--primary);
      border: 2px solid var(--primary);
    }

    .result-btn:active {
      transform: scale(0.98);
    }

    /* ===== Explanation Screen ===== */
    #explanation {
      background: #fff;
    }

    .explain-body {
      padding: 8px 20px 40px;
    }

    .explain-question-nav {
      display: flex;
      gap: 6px;
      margin-bottom: 20px;
      overflow-x: auto;
      padding: 4px 0;
      -webkit-overflow-scrolling: touch;
    }

    .explain-question-nav::-webkit-scrollbar {
      display: none;
    }

    .explain-nav-dot {
      width: 32px;
      height: 32px;
      border-radius: 50%;
      border: none;
      font-size: 12px;
      font-weight: 700;
      cursor: pointer;
      transition: all 0.2s;
      flex-shrink: 0;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    .explain-nav-dot.correct {
      background: var(--success-bg);
      color: var(--success);
    }

    .explain-nav-dot.incorrect {
      background: var(--danger-bg);
      color: var(--danger);
    }

    .explain-nav-dot.active {
      transform: scale(1.15);
      box-shadow: 0 0 0 2px var(--primary);
    }

    .explain-question-text {
      font-size: 15px;
      font-weight: 600;
      color: var(--gray-800);
      line-height: 1.6;
      margin-bottom: 16px;
      padding: 16px;
      background: var(--gray-50);
      border-radius: var(--radius);
    }

    .explain-answer-status {
      display: flex;
      gap: 12px;
      margin-bottom: 20px;
    }

    .explain-status-item {
      flex: 1;
      padding: 12px;
      border-radius: var(--radius);
      text-align: center;
    }

    .explain-status-item.your-answer {
      background: var(--danger-bg);
    }

    .explain-status-item.your-answer.correct-answer-match {
      background: var(--success-bg);
    }

    .explain-status-item.correct-answer {
      background: var(--success-bg);
    }

    .explain-status-label {
      font-size: 11px;
      color: var(--gray-500);
      margin-bottom: 4px;
    }

    .explain-status-value {
      font-size: 15px;
      font-weight: 700;
    }

    .explain-detail {
      background: var(--gray-50);
      border-radius: var(--radius);
      padding: 20px;
      margin-bottom: 20px;
    }

    .explain-detail-title {
      font-size: 14px;
      font-weight: 700;
      color: var(--primary);
      margin-bottom: 10px;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .explain-detail-text {
      font-size: 14px;
      color: var(--gray-700);
      line-height: 1.7;
    }

    .explain-keyword {
      display: inline-block;
      background: var(--primary-bg);
      color: var(--primary);
      font-size: 12px;
      font-weight: 600;
      padding: 3px 10px;
      border-radius: 20px;
      margin: 4px 4px 4px 0;
    }

    .explain-footer {
      display: flex;
      gap: 10px;
      padding: 16px 20px;
      padding-bottom: max(16px, env(safe-area-inset-bottom));
      border-top: 1px solid var(--gray-100);
    }

    .explain-footer-btn {
      flex: 1;
      padding: 12px;
      border-radius: var(--radius);
      border: none;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s;
    }

    .explain-footer-btn.prev {
      background: var(--gray-100);
      color: var(--gray-700);
    }

    .explain-footer-btn.next {
      background: var(--primary);
      color: #fff;
    }

    .explain-footer-btn:disabled {
      opacity: 0.4;
      cursor: not-allowed;
    }

    /* ===== Bottom Nav ===== */
    .bottom-nav {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      height: 70px;
      background: #fff;
      border-top: 1px solid var(--gray-200);
      display: flex;
      justify-content: space-around;
      align-items: flex-start;
      padding-top: 8px;
    }

    .nav-item {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 4px;
      font-size: 10px;
      color: var(--gray-400);
      cursor: pointer;
      transition: color 0.2s;
      border: none;
      background: none;
      padding: 4px 12px;
    }

    .nav-item.active {
      color: var(--primary);
    }

    .nav-item-icon {
      font-size: 22px;
    }

    /* ===== Utility ===== */
    .scroll-content {
      padding-bottom: 80px;
    }

    /* ===== Mobile responsive ===== */
    @media (max-width: 420px) {
      body {
        padding: 0;
        background: #fff;
      }
      .phone-frame {
        width: 100%;
        height: 100vh;
        height: 100dvh;
        border-radius: 0;
        box-shadow: none;
      }
      .phone-notch {
        display: none;
      }
    }

    /* ===== Confetti ===== */
    .confetti-container {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      overflow: hidden;
      z-index: 50;
    }

    .confetti {
      position: absolute;
      width: 10px;
      height: 10px;
      border-radius: 2px;
      animation: confettiFall 3s ease-in-out forwards;
    }

    @keyframes confettiFall {
      0% {
        transform: translateY(-10px) rotate(0deg);
        opacity: 1;
      }
      100% {
        transform: translateY(800px) rotate(720deg);
        opacity: 0;
      }
    }
  </style>
</head>
<body>

<div class="phone-frame">
  <div class="phone-notch"></div>
  <div class="phone-screen">
    <!-- Status Bar -->
    <div class="status-bar" id="statusBar">
      <span>9:41</span>
      <div class="status-bar-right">
        <span>ğŸ“¶</span>
        <span>ğŸ”‹</span>
      </div>
    </div>

    <!-- ============ SPLASH SCREEN ============ -->
    <div class="screen active" id="splash">
      <div class="splash-icon">ğŸ“š</div>
      <div class="splash-title">GMAPå¯¾ç­–</div>
      <div class="splash-subtitle">ã„ã¤ã§ã‚‚ã€ã©ã“ã§ã‚‚ã€åŠ¹ç‡çš„ã«å­¦ç¿’</div>
      <div class="splash-loader"></div>
    </div>

    <!-- ============ HOME SCREEN ============ -->
    <div class="screen" id="home">
      <div class="home-header">
        <div class="home-greeting">ãŠã‹ãˆã‚Šãªã•ã„ ğŸ‘‹</div>
        <div class="home-name">å­¦ç¿’è€…ã•ã‚“</div>
        <div class="home-stats">
          <div class="stat-card">
            <div class="stat-value">ğŸ”¥ 7</div>
            <div class="stat-label">é€£ç¶šå­¦ç¿’æ—¥æ•°</div>
          </div>
          <div class="stat-card">
            <div class="stat-value">42</div>
            <div class="stat-label">è§£ç­”æ¸ˆã¿</div>
          </div>
          <div class="stat-card">
            <div class="stat-value">76%</div>
            <div class="stat-label">æ­£ç­”ç‡</div>
          </div>
        </div>
      </div>
      <div class="home-body scroll-content">
        <div class="daily-card" onclick="startDaily()">
          <div class="daily-icon">âš¡</div>
          <div class="daily-content">
            <h3>ä»Šæ—¥ã®ãƒãƒ£ãƒ¬ãƒ³ã‚¸</h3>
            <p>5å•ã®ã‚¯ã‚¤ãƒƒã‚¯ãƒ†ã‚¹ãƒˆ</p>
          </div>
          <div class="daily-badge">NEW</div>
        </div>

        <div class="section-title">åˆ†é‡åˆ¥å•é¡Œé›†</div>
        <div class="category-list" id="categoryList"></div>
      </div>
      <div class="bottom-nav">
        <button class="nav-item active">
          <span class="nav-item-icon">ğŸ </span>
          <span>ãƒ›ãƒ¼ãƒ </span>
        </button>
        <button class="nav-item">
          <span class="nav-item-icon">ğŸ“Š</span>
          <span>æˆç¸¾</span>
        </button>
        <button class="nav-item">
          <span class="nav-item-icon">ğŸ“–</span>
          <span>å¾©ç¿’</span>
        </button>
        <button class="nav-item">
          <span class="nav-item-icon">âš™ï¸</span>
          <span>è¨­å®š</span>
        </button>
      </div>
    </div>

    <!-- ============ QUIZ SETUP SCREEN ============ -->
    <div class="screen" id="quiz-setup">
      <div class="screen-header">
        <button class="back-btn" onclick="navigateTo('home')">â†</button>
        <span class="screen-header-title">å•é¡Œé›†ã‚’é¸æŠ</span>
      </div>
      <div class="setup-body">
        <div class="setup-category-header">
          <div class="setup-category-icon" id="setupCategoryIcon"></div>
          <div class="setup-category-name" id="setupCategoryName"></div>
          <div class="setup-category-desc" id="setupCategoryDesc"></div>
        </div>
        <div class="setup-options">
          <div class="setup-option">
            <div class="setup-option-title">å‡ºé¡Œæ•°</div>
            <div class="option-chips">
              <div class="option-chip selected" data-count="5">5å•</div>
              <div class="option-chip" data-count="10">10å•</div>
              <div class="option-chip" data-count="all">å…¨å•</div>
            </div>
          </div>
          <div class="setup-option">
            <div class="setup-option-title">å‡ºé¡Œãƒ¢ãƒ¼ãƒ‰</div>
            <div class="option-chips">
              <div class="option-chip selected">é †ç•ªé€šã‚Š</div>
              <div class="option-chip">ãƒ©ãƒ³ãƒ€ãƒ </div>
              <div class="option-chip">è‹¦æ‰‹ã®ã¿</div>
            </div>
          </div>
        </div>
        <button class="start-btn" onclick="startQuiz()">å­¦ç¿’ã‚’é–‹å§‹ã™ã‚‹</button>
      </div>
    </div>

    <!-- ============ QUIZ SCREEN ============ -->
    <div class="screen" id="quiz">
      <div class="quiz-header">
        <div class="quiz-top-row">
          <span class="quiz-progress-text" id="quizProgressText">å•é¡Œ 1 / 5</span>
          <div class="quiz-timer" id="quizTimer">â± 0:00</div>
          <button class="quiz-close-btn" onclick="confirmQuit()">âœ•</button>
        </div>
        <div class="quiz-progress-bar">
          <div class="quiz-progress-fill" id="quizProgressFill" style="width: 0%"></div>
        </div>
      </div>
      <div class="quiz-body" id="quizBody">
        <div class="question-category-tag" id="questionCategoryTag"></div>
        <div class="question-text" id="questionText"></div>
        <div class="answer-options" id="answerOptions"></div>
        <div class="feedback-banner" id="feedbackBanner">
          <span class="feedback-icon" id="feedbackIcon"></span>
          <span class="feedback-text" id="feedbackText"></span>
        </div>
      </div>
      <div class="quiz-footer">
        <button class="next-btn primary" id="nextBtn" onclick="nextQuestion()" disabled>
          æ¬¡ã®å•é¡Œã¸
        </button>
      </div>
    </div>

    <!-- ============ RESULT SCREEN ============ -->
    <div class="screen" id="result">
      <div class="result-header">
        <div class="result-emoji" id="resultEmoji">ğŸ‰</div>
        <div class="result-title" id="resultTitle">ã™ã°ã‚‰ã—ã„ï¼</div>
        <div class="result-score" id="resultScore">80%</div>
        <div class="result-score-label" id="resultScoreLabel">4 / 5 å•æ­£è§£</div>
      </div>
      <div class="result-body scroll-content" style="padding-bottom: 40px;">
        <div class="result-stats">
          <div class="result-stat">
            <div class="result-stat-value correct-color" id="resultCorrectCount">4</div>
            <div class="result-stat-label">æ­£è§£</div>
          </div>
          <div class="result-stat">
            <div class="result-stat-value incorrect-color" id="resultIncorrectCount">1</div>
            <div class="result-stat-label">ä¸æ­£è§£</div>
          </div>
          <div class="result-stat">
            <div class="result-stat-value time-color" id="resultTime">2:34</div>
            <div class="result-stat-label">æ‰€è¦æ™‚é–“</div>
          </div>
        </div>
        <div class="result-questions-title">å•é¡Œåˆ¥ã®çµæœ</div>
        <div class="result-question-list" id="resultQuestionList"></div>
        <div class="result-actions">
          <button class="result-btn primary" onclick="showExplanation(0)">è§£èª¬ã‚’è¦‹ã‚‹</button>
          <button class="result-btn secondary" onclick="navigateTo('home')">ãƒ›ãƒ¼ãƒ ã«æˆ»ã‚‹</button>
        </div>
      </div>
      <div class="confetti-container" id="confettiContainer"></div>
    </div>

    <!-- ============ EXPLANATION SCREEN ============ -->
    <div class="screen" id="explanation">
      <div class="screen-header">
        <button class="back-btn" onclick="navigateTo('result')">â†</button>
        <span class="screen-header-title">è§£èª¬</span>
      </div>
      <div class="explain-body" id="explainBody">
        <div class="explain-question-nav" id="explainNav"></div>
        <div id="explainContent"></div>
      </div>
      <div class="explain-footer">
        <button class="explain-footer-btn prev" id="explainPrevBtn" onclick="navigateExplanation(-1)">â† å‰ã®å•é¡Œ</button>
        <button class="explain-footer-btn next" id="explainNextBtn" onclick="navigateExplanation(1)">æ¬¡ã®å•é¡Œ â†’</button>
      </div>
    </div>

  </div>
</div>

<script>
  // ===== DATA =====
  const categories = [
    {
      id: 'marketing',
      name: 'ãƒãƒ¼ã‚±ãƒ†ã‚£ãƒ³ã‚°',
      icon: 'ğŸ“£',
      color: '#EF4444',
      bgColor: '#FEE2E2',
      desc: 'ãƒãƒ¼ã‚±ãƒ†ã‚£ãƒ³ã‚°æˆ¦ç•¥ãƒ»4Pãƒ»STPåˆ†æãªã©',
      progress: 60,
      totalQuestions: 15,
      questions: [
        {
          text: 'STPåˆ†æã®ã€ŒSã€ãŒç¤ºã™ã‚‚ã®ã¨ã—ã¦æ­£ã—ã„ã®ã¯ã©ã‚Œã‹ã€‚',
          options: ['ã‚»ã‚°ãƒ¡ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³', 'ã‚¹ãƒˆãƒ©ãƒ†ã‚¸ãƒ¼', 'ã‚»ãƒ¼ãƒ«ã‚¹', 'ã‚µãƒ—ãƒ©ã‚¤'],
          correct: 0,
          explanation: 'STPåˆ†æã¯ãƒãƒ¼ã‚±ãƒ†ã‚£ãƒ³ã‚°æˆ¦ç•¥ã®åŸºæœ¬ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã§ã€Sï¼ˆSegmentationï¼šå¸‚å ´ç´°åˆ†åŒ–ï¼‰ã€Tï¼ˆTargetingï¼šæ¨™çš„å¸‚å ´ã®é¸å®šï¼‰ã€Pï¼ˆPositioningï¼šãƒã‚¸ã‚·ãƒ§ãƒ‹ãƒ³ã‚°ï¼‰ã®3ã¤ã®ã‚¹ãƒ†ãƒƒãƒ—ã‹ã‚‰æ§‹æˆã•ã‚Œã¾ã™ã€‚ã‚»ã‚°ãƒ¡ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã§ã¯ã€å¸‚å ´ã‚’é¡§å®¢ã®å±æ€§ã‚„ãƒ‹ãƒ¼ã‚ºã«åŸºã¥ã„ã¦ç´°åˆ†åŒ–ã—ã€åŒè³ªçš„ãªã‚°ãƒ«ãƒ¼ãƒ—ã«åˆ†ã‘ã¾ã™ã€‚',
          keywords: ['ã‚»ã‚°ãƒ¡ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³', 'ã‚¿ãƒ¼ã‚²ãƒ†ã‚£ãƒ³ã‚°', 'ãƒã‚¸ã‚·ãƒ§ãƒ‹ãƒ³ã‚°', 'å¸‚å ´ç´°åˆ†åŒ–']
        },
        {
          text: 'ãƒãƒ¼ã‚±ãƒ†ã‚£ãƒ³ã‚°ãƒ»ãƒŸãƒƒã‚¯ã‚¹ã®4Pã«å«ã¾ã‚Œãªã„ã‚‚ã®ã¯ã©ã‚Œã‹ã€‚',
          options: ['Productï¼ˆè£½å“ï¼‰', 'Priceï¼ˆä¾¡æ ¼ï¼‰', 'Peopleï¼ˆäººæï¼‰', 'Promotionï¼ˆè²©ä¿ƒï¼‰'],
          correct: 2,
          explanation: 'ãƒãƒ¼ã‚±ãƒ†ã‚£ãƒ³ã‚°ãƒ»ãƒŸãƒƒã‚¯ã‚¹ã®4Pã¯ã€Productï¼ˆè£½å“ï¼‰ã€Priceï¼ˆä¾¡æ ¼ï¼‰ã€Placeï¼ˆæµé€šï¼‰ã€Promotionï¼ˆè²©ä¿ƒï¼‰ã®4ã¤ã§ã™ã€‚Peopleï¼ˆäººæï¼‰ã¯4Pã«ã¯å«ã¾ã‚Œã¾ã›ã‚“ãŒã€ã‚µãƒ¼ãƒ“ã‚¹ãƒ»ãƒãƒ¼ã‚±ãƒ†ã‚£ãƒ³ã‚°ã®7Pã®ä¸€ã¤ã¨ã—ã¦æ‹¡å¼µã•ã‚Œã¦ã„ã¾ã™ã€‚4Pã¯ä¼æ¥­ãŒçµ±åˆ¶å¯èƒ½ãªãƒãƒ¼ã‚±ãƒ†ã‚£ãƒ³ã‚°æ‰‹æ®µã‚’ä½“ç³»çš„ã«æ•´ç†ã—ãŸãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã§ã™ã€‚',
          keywords: ['4P', 'Product', 'Price', 'Place', 'Promotion']
        },
        {
          text: 'ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆãƒ»ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ã«ãŠã„ã¦ã€å£²ä¸ŠãŒæœ€ã‚‚å¤§ãããªã‚‹ã®ã¯ã©ã®æ®µéšã‹ã€‚',
          options: ['å°å…¥æœŸ', 'æˆé•·æœŸ', 'æˆç†ŸæœŸ', 'è¡°é€€æœŸ'],
          correct: 2,
          explanation: 'æˆç†ŸæœŸã¯å¸‚å ´ãŒé£½å’Œã«é”ã—ã€å£²ä¸Šé«˜ãŒæœ€å¤§ã¨ãªã‚‹æ®µéšã§ã™ã€‚ãŸã ã—ã€æˆé•·ç‡ã¯éˆåŒ–ã—ã€ç«¶äº‰ãŒæ¿€åŒ–ã™ã‚‹ãŸã‚ã€å·®åˆ¥åŒ–æˆ¦ç•¥ã‚„ã‚³ã‚¹ãƒˆå‰Šæ¸›ãŒé‡è¦ã«ãªã‚Šã¾ã™ã€‚å°å…¥æœŸã¯èªçŸ¥åº¦ãŒä½ãå£²ä¸Šã¯å°‘ãªãã€æˆé•·æœŸã¯æ€¥é€Ÿã«æ‹¡å¤§ã—ã€è¡°é€€æœŸã¯éœ€è¦ãŒæ¸›å°‘ã—ã¾ã™ã€‚',
          keywords: ['ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆãƒ»ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«', 'æˆç†ŸæœŸ', 'å°å…¥æœŸ', 'æˆé•·æœŸ', 'è¡°é€€æœŸ']
        },
        {
          text: 'ãƒ–ãƒ©ãƒ³ãƒ‰ã‚¨ã‚¯ã‚¤ãƒ†ã‚£ã®æ§‹æˆè¦ç´ ã¨ã—ã¦é©åˆ‡ã§ãªã„ã‚‚ã®ã¯ã©ã‚Œã‹ã€‚',
          options: ['ãƒ–ãƒ©ãƒ³ãƒ‰èªçŸ¥', 'ãƒ–ãƒ©ãƒ³ãƒ‰ãƒ­ã‚¤ãƒ¤ãƒ«ãƒ†ã‚£', 'ãƒ–ãƒ©ãƒ³ãƒ‰é€£æƒ³', 'ãƒ–ãƒ©ãƒ³ãƒ‰ã‚³ã‚¹ãƒˆ'],
          correct: 3,
          explanation: 'ã‚¢ãƒ¼ã‚«ãƒ¼ã®ãƒ–ãƒ©ãƒ³ãƒ‰ã‚¨ã‚¯ã‚¤ãƒ†ã‚£ãƒ¢ãƒ‡ãƒ«ã§ã¯ã€ãƒ–ãƒ©ãƒ³ãƒ‰èªçŸ¥ã€ãƒ–ãƒ©ãƒ³ãƒ‰ãƒ­ã‚¤ãƒ¤ãƒ«ãƒ†ã‚£ã€çŸ¥è¦šå“è³ªã€ãƒ–ãƒ©ãƒ³ãƒ‰é€£æƒ³ã€ãã®ä»–ã®è³‡ç”£ï¼ˆç‰¹è¨±ãªã©ï¼‰ãŒæ§‹æˆè¦ç´ ã¨ã•ã‚Œã¦ã„ã¾ã™ã€‚ã€Œãƒ–ãƒ©ãƒ³ãƒ‰ã‚³ã‚¹ãƒˆã€ã¨ã„ã†æ¦‚å¿µã¯ãƒ–ãƒ©ãƒ³ãƒ‰ã‚¨ã‚¯ã‚¤ãƒ†ã‚£ã®æ§‹æˆè¦ç´ ã«ã¯å«ã¾ã‚Œã¾ã›ã‚“ã€‚',
          keywords: ['ãƒ–ãƒ©ãƒ³ãƒ‰ã‚¨ã‚¯ã‚¤ãƒ†ã‚£', 'ã‚¢ãƒ¼ã‚«ãƒ¼', 'ãƒ–ãƒ©ãƒ³ãƒ‰èªçŸ¥', 'ãƒ­ã‚¤ãƒ¤ãƒ«ãƒ†ã‚£']
        },
        {
          text: 'AIDMAï¼ˆã‚¢ã‚¤ãƒ‰ãƒï¼‰ãƒ¢ãƒ‡ãƒ«ã®ã€ŒDã€ã¯ä½•ã‚’æ„å‘³ã™ã‚‹ã‹ã€‚',
          options: ['Decisionï¼ˆæ±ºå®šï¼‰', 'Desireï¼ˆæ¬²æ±‚ï¼‰', 'Demandï¼ˆéœ€è¦ï¼‰', 'Distributionï¼ˆæµé€šï¼‰'],
          correct: 1,
          explanation: 'AIDMAãƒ¢ãƒ‡ãƒ«ã¯æ¶ˆè²»è€…ã®è³¼è²·è¡Œå‹•ãƒ—ãƒ­ã‚»ã‚¹ã‚’è¡¨ã™ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã§ã™ã€‚Aï¼ˆAttentionï¼šæ³¨æ„ï¼‰â†’ Iï¼ˆInterestï¼šé–¢å¿ƒï¼‰â†’ Dï¼ˆDesireï¼šæ¬²æ±‚ï¼‰â†’ Mï¼ˆMemoryï¼šè¨˜æ†¶ï¼‰â†’ Aï¼ˆActionï¼šè¡Œå‹•ï¼‰ã®5æ®µéšã§æ§‹æˆã•ã‚Œã¾ã™ã€‚æ¶ˆè²»è€…ãŒå•†å“ã«æ³¨æ„ã‚’å‘ã‘ã€é–¢å¿ƒã‚’æŒã¡ã€æ¬²ã—ã„ã¨æ„Ÿã˜ã€è¨˜æ†¶ã—ã€è³¼è²·è¡Œå‹•ã«è‡³ã‚‹ãƒ—ãƒ­ã‚»ã‚¹ã‚’ç¤ºã—ã¦ã„ã¾ã™ã€‚',
          keywords: ['AIDMA', 'è³¼è²·è¡Œå‹•', 'Desire', 'æ¬²æ±‚']
        }
      ]
    },
    {
      id: 'strategy',
      name: 'çµŒå–¶æˆ¦ç•¥',
      icon: 'â™Ÿï¸',
      color: '#3B82F6',
      bgColor: '#DBEAFE',
      desc: 'SWOTåˆ†æãƒ»ãƒ•ã‚¡ã‚¤ãƒ–ãƒ•ã‚©ãƒ¼ã‚¹ãƒ»PPMãªã©',
      progress: 30,
      totalQuestions: 15,
      questions: [
        {
          text: 'ãƒã‚¤ã‚±ãƒ«ãƒ»ãƒãƒ¼ã‚¿ãƒ¼ã®ã€Œ5ã¤ã®ç«¶äº‰è¦å› ï¼ˆãƒ•ã‚¡ã‚¤ãƒ–ãƒ•ã‚©ãƒ¼ã‚¹ï¼‰ã€ã«å«ã¾ã‚Œãªã„ã‚‚ã®ã¯ã©ã‚Œã‹ã€‚',
          options: ['æ—¢å­˜ä¼æ¥­é–“ã®ç«¶äº‰', 'æ–°è¦å‚å…¥ã®è„…å¨', 'æ”¿åºœã®è¦åˆ¶', 'ä»£æ›¿å“ã®è„…å¨'],
          correct: 2,
          explanation: 'ãƒãƒ¼ã‚¿ãƒ¼ã®ãƒ•ã‚¡ã‚¤ãƒ–ãƒ•ã‚©ãƒ¼ã‚¹ã¯ã€â‘ æ—¢å­˜ä¼æ¥­é–“ã®ç«¶äº‰ã€â‘¡æ–°è¦å‚å…¥ã®è„…å¨ã€â‘¢ä»£æ›¿å“ã®è„…å¨ã€â‘£è²·ã„æ‰‹ã®äº¤æ¸‰åŠ›ã€â‘¤å£²ã‚Šæ‰‹ã®äº¤æ¸‰åŠ›ã®5ã¤ã§ã™ã€‚ã€Œæ”¿åºœã®è¦åˆ¶ã€ã¯å¤–éƒ¨ç’°å¢ƒã®è¦å› ã§ã™ãŒã€5ã¤ã®ç«¶äº‰è¦å› ã«ã¯ç›´æ¥å«ã¾ã‚Œã¾ã›ã‚“ã€‚',
          keywords: ['ãƒ•ã‚¡ã‚¤ãƒ–ãƒ•ã‚©ãƒ¼ã‚¹', 'ãƒãƒ¼ã‚¿ãƒ¼', 'ç«¶äº‰æˆ¦ç•¥', 'æ¥­ç•Œåˆ†æ']
        },
        {
          text: 'PPMï¼ˆãƒ—ãƒ­ãƒ€ã‚¯ãƒˆãƒ»ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒªã‚ªãƒ»ãƒãƒˆãƒªã‚¯ã‚¹ï¼‰ã§ã€å¸‚å ´æˆé•·ç‡ãŒé«˜ãã€ç›¸å¯¾çš„å¸‚å ´ã‚·ã‚§ã‚¢ã‚‚é«˜ã„äº‹æ¥­ã‚’ä½•ã¨å‘¼ã¶ã‹ã€‚',
          options: ['èŠ±å½¢ï¼ˆStarï¼‰', 'é‡‘ã®ãªã‚‹æœ¨ï¼ˆCash Cowï¼‰', 'å•é¡Œå…ï¼ˆQuestion Markï¼‰', 'è² ã‘çŠ¬ï¼ˆDogï¼‰'],
          correct: 0,
          explanation: 'PPMã¯BCGï¼ˆãƒœã‚¹ãƒˆãƒ³ãƒ»ã‚³ãƒ³ã‚µãƒ«ãƒ†ã‚£ãƒ³ã‚°ãƒ»ã‚°ãƒ«ãƒ¼ãƒ—ï¼‰ãŒé–‹ç™ºã—ãŸãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã§ã€å¸‚å ´æˆé•·ç‡ã¨ç›¸å¯¾çš„å¸‚å ´ã‚·ã‚§ã‚¢ã®2è»¸ã§äº‹æ¥­ã‚’åˆ†é¡ã—ã¾ã™ã€‚èŠ±å½¢ï¼ˆStarï¼‰ã¯ä¸¡æ–¹ãŒé«˜ãã€ç©æ¥µçš„æŠ•è³‡ãŒå¿…è¦ã§ã™ã€‚é‡‘ã®ãªã‚‹æœ¨ã¯æˆé•·ç‡ä½ãƒ»ã‚·ã‚§ã‚¢é«˜ã§å®‰å®šåç›Šæºã€å•é¡Œå…ã¯æˆé•·ç‡é«˜ãƒ»ã‚·ã‚§ã‚¢ä½ã§æŠ•è³‡åˆ¤æ–­ãŒå¿…è¦ã€è² ã‘çŠ¬ã¯ä¸¡æ–¹ä½ãæ’¤é€€æ¤œè¨å¯¾è±¡ã§ã™ã€‚',
          keywords: ['PPM', 'BCG', 'èŠ±å½¢', 'é‡‘ã®ãªã‚‹æœ¨', 'å•é¡Œå…', 'è² ã‘çŠ¬']
        },
        {
          text: 'SWOTåˆ†æã®ã€ŒOã€ãŒç¤ºã™ã‚‚ã®ã¯ã©ã‚Œã‹ã€‚',
          options: ['çµ„ç¹”ï¼ˆOrganizationï¼‰', 'æ©Ÿä¼šï¼ˆOpportunityï¼‰', 'é‹å–¶ï¼ˆOperationï¼‰', 'æœ€é©åŒ–ï¼ˆOptimizationï¼‰'],
          correct: 1,
          explanation: 'SWOTåˆ†æã¯ã€å†…éƒ¨ç’°å¢ƒã®Sï¼ˆStrengthsï¼šå¼·ã¿ï¼‰ã¨Wï¼ˆWeaknessesï¼šå¼±ã¿ï¼‰ã€å¤–éƒ¨ç’°å¢ƒã®Oï¼ˆOpportunitiesï¼šæ©Ÿä¼šï¼‰ã¨Tï¼ˆThreatsï¼šè„…å¨ï¼‰ã‚’æ•´ç†ã™ã‚‹ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã§ã™ã€‚æ©Ÿä¼šï¼ˆOpportunityï¼‰ã¯å¤–éƒ¨ç’°å¢ƒã«ãŠã‘ã‚‹å¥½ã¾ã—ã„è¦å› ã‚’æŒ‡ã—ã€æˆ¦ç•¥ç«‹æ¡ˆã®åŸºç›¤ã¨ãªã‚Šã¾ã™ã€‚',
          keywords: ['SWOT', 'æ©Ÿä¼š', 'å¼·ã¿', 'å¼±ã¿', 'è„…å¨']
        },
        {
          text: 'ã‚¢ãƒ³ã‚¾ãƒ•ã®æˆé•·ãƒãƒˆãƒªã‚¯ã‚¹ã§ã€Œæ—¢å­˜å¸‚å ´Ã—æ–°è£½å“ã€ã®æˆ¦ç•¥ã‚’ä½•ã¨å‘¼ã¶ã‹ã€‚',
          options: ['å¸‚å ´æµ¸é€', 'å¸‚å ´é–‹æ‹“', 'è£½å“é–‹ç™º', 'å¤šè§’åŒ–'],
          correct: 2,
          explanation: 'ã‚¢ãƒ³ã‚¾ãƒ•ã®æˆé•·ãƒãƒˆãƒªã‚¯ã‚¹ã¯ã€å¸‚å ´ï¼ˆæ—¢å­˜/æ–°è¦ï¼‰ã¨è£½å“ï¼ˆæ—¢å­˜/æ–°è¦ï¼‰ã®2è»¸ã§æˆé•·æˆ¦ç•¥ã‚’4ã¤ã«åˆ†é¡ã—ã¾ã™ã€‚å¸‚å ´æµ¸é€ï¼ˆæ—¢å­˜Ã—æ—¢å­˜ï¼‰ã€è£½å“é–‹ç™ºï¼ˆæ—¢å­˜å¸‚å ´Ã—æ–°è£½å“ï¼‰ã€å¸‚å ´é–‹æ‹“ï¼ˆæ–°å¸‚å ´Ã—æ—¢å­˜è£½å“ï¼‰ã€å¤šè§’åŒ–ï¼ˆæ–°å¸‚å ´Ã—æ–°è£½å“ï¼‰ã§ã™ã€‚è£½å“é–‹ç™ºæˆ¦ç•¥ã¯æ—¢å­˜é¡§å®¢ã«æ–°ã—ã„è£½å“ã‚’æä¾›ã™ã‚‹æˆ¦ç•¥ã§ã™ã€‚',
          keywords: ['ã‚¢ãƒ³ã‚¾ãƒ•', 'æˆé•·ãƒãƒˆãƒªã‚¯ã‚¹', 'è£½å“é–‹ç™º', 'å¸‚å ´æµ¸é€']
        },
        {
          text: 'ãƒãƒªãƒ¥ãƒ¼ãƒã‚§ãƒ¼ãƒ³åˆ†æã«ãŠã‘ã‚‹ã€Œæ”¯æ´æ´»å‹•ã€ã«è©²å½“ã™ã‚‹ã®ã¯ã©ã‚Œã‹ã€‚',
          options: ['è£½é€ ', 'å‡ºè·ç‰©æµ', 'äººäº‹ãƒ»åŠ´å‹™ç®¡ç†', 'ãƒãƒ¼ã‚±ãƒ†ã‚£ãƒ³ã‚°ãƒ»è²©å£²'],
          correct: 2,
          explanation: 'ãƒãƒ¼ã‚¿ãƒ¼ã®ãƒãƒªãƒ¥ãƒ¼ãƒã‚§ãƒ¼ãƒ³ã§ã¯ã€ä¼æ¥­æ´»å‹•ã‚’ã€Œä¸»æ´»å‹•ã€ã¨ã€Œæ”¯æ´æ´»å‹•ã€ã«åˆ†ã‘ã¾ã™ã€‚ä¸»æ´»å‹•ã¯è³¼è²·ç‰©æµã€è£½é€ ã€å‡ºè·ç‰©æµã€ãƒãƒ¼ã‚±ãƒ†ã‚£ãƒ³ã‚°ãƒ»è²©å£²ã€ã‚µãƒ¼ãƒ“ã‚¹ã®5ã¤ã§ã™ã€‚æ”¯æ´æ´»å‹•ã¯å…¨èˆ¬ç®¡ç†ï¼ˆã‚¤ãƒ³ãƒ•ãƒ©ï¼‰ã€äººäº‹ãƒ»åŠ´å‹™ç®¡ç†ã€æŠ€è¡“é–‹ç™ºã€èª¿é”ã®4ã¤ã§ã€ä¸»æ´»å‹•ã‚’æ¨ªæ–­çš„ã«ã‚µãƒãƒ¼ãƒˆã™ã‚‹æ©Ÿèƒ½ã§ã™ã€‚',
          keywords: ['ãƒãƒªãƒ¥ãƒ¼ãƒã‚§ãƒ¼ãƒ³', 'æ”¯æ´æ´»å‹•', 'ä¸»æ´»å‹•', 'ãƒãƒ¼ã‚¿ãƒ¼']
        }
      ]
    },
    {
      id: 'finance',
      name: 'ãƒ•ã‚¡ã‚¤ãƒŠãƒ³ã‚¹',
      icon: 'ğŸ’°',
      color: '#10B981',
      bgColor: '#D1FAE5',
      desc: 'NPVãƒ»ROEãƒ»è²¡å‹™åˆ†æãƒ»æŠ•è³‡åˆ¤æ–­ãªã©',
      progress: 15,
      totalQuestions: 15,
      questions: [
        {
          text: 'NPVï¼ˆæ­£å‘³ç¾åœ¨ä¾¡å€¤ï¼‰ãŒãƒ—ãƒ©ã‚¹ã®å ´åˆã€æŠ•è³‡åˆ¤æ–­ã¨ã—ã¦ã©ã†è€ƒãˆã‚‹ã¹ãã‹ã€‚',
          options: ['æŠ•è³‡ã‚’è¦‹é€ã‚‹', 'æŠ•è³‡ã‚’å®Ÿè¡Œã™ã‚‹', 'è¿½åŠ æƒ…å ±ã‚’å¾…ã¤', 'ä»–ã®æŠ•è³‡ã¨æ¯”è¼ƒã§ããªã„'],
          correct: 1,
          explanation: 'NPVï¼ˆNet Present Valueï¼‰ã¯ã€æŠ•è³‡ã‹ã‚‰å¾—ã‚‰ã‚Œã‚‹å°†æ¥ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ•ãƒ­ãƒ¼ã®ç¾åœ¨ä¾¡å€¤åˆè¨ˆã‹ã‚‰åˆæœŸæŠ•è³‡é¡ã‚’å·®ã—å¼•ã„ãŸå€¤ã§ã™ã€‚NPVãŒãƒ—ãƒ©ã‚¹ã§ã‚ã‚Œã°ã€æŠ•è³‡ã«ã‚ˆã‚Šä¼æ¥­ä¾¡å€¤ãŒå¢—åŠ ã™ã‚‹ã“ã¨ã‚’æ„å‘³ã—ã€æŠ•è³‡ã‚’å®Ÿè¡Œã™ã¹ãã¨åˆ¤æ–­ã—ã¾ã™ã€‚NPVãŒé«˜ã„ã»ã©æŠ•è³‡ã®é­…åŠ›åº¦ãŒé«˜ã„ã¨è©•ä¾¡ã•ã‚Œã¾ã™ã€‚',
          keywords: ['NPV', 'æ­£å‘³ç¾åœ¨ä¾¡å€¤', 'æŠ•è³‡åˆ¤æ–­', 'ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ•ãƒ­ãƒ¼']
        },
        {
          text: 'ROEï¼ˆè‡ªå·±è³‡æœ¬åˆ©ç›Šç‡ï¼‰ã‚’æ±‚ã‚ã‚‹è¨ˆç®—å¼ã¨ã—ã¦æ­£ã—ã„ã‚‚ã®ã¯ã©ã‚Œã‹ã€‚',
          options: ['å½“æœŸç´”åˆ©ç›Š Ã· ç·è³‡ç”£', 'å½“æœŸç´”åˆ©ç›Š Ã· è‡ªå·±è³‡æœ¬', 'å–¶æ¥­åˆ©ç›Š Ã· å£²ä¸Šé«˜', 'çµŒå¸¸åˆ©ç›Š Ã· ç·è³‡ç”£'],
          correct: 1,
          explanation: 'ROEï¼ˆReturn on Equityï¼‰ã¯ã€Œå½“æœŸç´”åˆ©ç›Š Ã· è‡ªå·±è³‡æœ¬ Ã— 100ã€ã§ç®—å‡ºã•ã‚Œã¾ã™ã€‚æ ªä¸»ãŒå‡ºè³‡ã—ãŸè³‡æœ¬ã«å¯¾ã—ã¦ã©ã‚Œã ã‘åŠ¹ç‡çš„ã«åˆ©ç›Šã‚’ç”Ÿã¿å‡ºã—ã¦ã„ã‚‹ã‹ã‚’ç¤ºã™æŒ‡æ¨™ã§ã™ã€‚ãƒ‡ãƒ¥ãƒãƒ³åˆ†æã§ã¯ã€ROE = å£²ä¸Šé«˜åˆ©ç›Šç‡ Ã— ç·è³‡ç”£å›è»¢ç‡ Ã— è²¡å‹™ãƒ¬ãƒãƒ¬ãƒƒã‚¸ã«åˆ†è§£ã—ã¦åˆ†æã§ãã¾ã™ã€‚',
          keywords: ['ROE', 'è‡ªå·±è³‡æœ¬åˆ©ç›Šç‡', 'ãƒ‡ãƒ¥ãƒãƒ³åˆ†æ', 'è²¡å‹™æŒ‡æ¨™']
        },
        {
          text: 'ã€Œè³‡æœ¬ã‚³ã‚¹ãƒˆã€ã®èª¬æ˜ã¨ã—ã¦æœ€ã‚‚é©åˆ‡ãªã®ã¯ã©ã‚Œã‹ã€‚',
          options: ['è¨­å‚™æŠ•è³‡ã«å¿…è¦ãªè³‡é‡‘', 'æ ªå¼ç™ºè¡Œã«ã‹ã‹ã‚‹æ‰‹æ•°æ–™', 'è³‡é‡‘æä¾›è€…ãŒè¦æ±‚ã™ã‚‹æœ€ä½é™ã®åç›Šç‡', 'æ¸›ä¾¡å„Ÿå´è²»ã®ç·é¡'],
          correct: 2,
          explanation: 'è³‡æœ¬ã‚³ã‚¹ãƒˆï¼ˆCost of Capitalï¼‰ã¯ã€ä¼æ¥­ãŒè³‡é‡‘ã‚’èª¿é”ã™ã‚‹éš›ã«ã€è³‡é‡‘æä¾›è€…ï¼ˆæ ªä¸»ã‚„å‚µæ¨©è€…ï¼‰ãŒè¦æ±‚ã™ã‚‹æœ€ä½é™ã®åç›Šç‡ã§ã™ã€‚WACCï¼ˆåŠ é‡å¹³å‡è³‡æœ¬ã‚³ã‚¹ãƒˆï¼‰ã¨ã—ã¦ç®—å‡ºã•ã‚Œã‚‹ã“ã¨ãŒå¤šãã€æŠ•è³‡åˆ¤æ–­ã®ãƒãƒ¼ãƒ‰ãƒ«ãƒ¬ãƒ¼ãƒˆã¨ã—ã¦ä½¿ã‚ã‚Œã¾ã™ã€‚NPVã®å‰²å¼•ç‡ã¨ã—ã¦ã‚‚åˆ©ç”¨ã•ã‚Œã¾ã™ã€‚',
          keywords: ['è³‡æœ¬ã‚³ã‚¹ãƒˆ', 'WACC', 'å‰²å¼•ç‡', 'ãƒãƒ¼ãƒ‰ãƒ«ãƒ¬ãƒ¼ãƒˆ']
        },
        {
          text: 'æç›Šåˆ†å²ç‚¹å£²ä¸Šé«˜ã‚’æ±‚ã‚ã‚‹å¼ã¨ã—ã¦æ­£ã—ã„ã®ã¯ã©ã‚Œã‹ã€‚',
          options: ['å›ºå®šè²» Ã· å¤‰å‹•è²»ç‡', 'å›ºå®šè²» Ã· (1 - å¤‰å‹•è²»ç‡)', 'å¤‰å‹•è²» Ã· å›ºå®šè²»ç‡', '(å›ºå®šè²» + å¤‰å‹•è²») Ã· 2'],
          correct: 1,
          explanation: 'æç›Šåˆ†å²ç‚¹å£²ä¸Šé«˜ã¯ã€Œå›ºå®šè²» Ã· (1 - å¤‰å‹•è²»ç‡)ã€ã§æ±‚ã‚ã‚‰ã‚Œã¾ã™ã€‚å¤‰å‹•è²»ç‡ = å¤‰å‹•è²» Ã· å£²ä¸Šé«˜ ã§ã‚ã‚Šã€(1 - å¤‰å‹•è²»ç‡) ã¯é™ç•Œåˆ©ç›Šç‡ï¼ˆè²¢çŒ®åˆ©ç›Šç‡ï¼‰ã‚’æ„å‘³ã—ã¾ã™ã€‚æç›Šåˆ†å²ç‚¹ã¯åˆ©ç›ŠãŒã‚¼ãƒ­ã¨ãªã‚‹å£²ä¸Šæ°´æº–ã§ã‚ã‚Šã€çµŒå–¶ã®å®‰å…¨æ€§ã‚’è©•ä¾¡ã™ã‚‹é‡è¦ãªæŒ‡æ¨™ã§ã™ã€‚',
          keywords: ['æç›Šåˆ†å²ç‚¹', 'å›ºå®šè²»', 'å¤‰å‹•è²»ç‡', 'é™ç•Œåˆ©ç›Šç‡']
        },
        {
          text: 'ãƒ•ãƒªãƒ¼ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ•ãƒ­ãƒ¼ï¼ˆFCFï¼‰ã®è¨ˆç®—ã§æ­£ã—ã„ã‚‚ã®ã¯ã©ã‚Œã‹ã€‚',
          options: ['å£²ä¸Šé«˜ - å£²ä¸ŠåŸä¾¡', 'å–¶æ¥­åˆ©ç›Š + æ¸›ä¾¡å„Ÿå´è²» - è¨­å‚™æŠ•è³‡ - é‹è»¢è³‡æœ¬å¢—åŠ é¡', 'å½“æœŸç´”åˆ©ç›Š + é…å½“é‡‘', 'çµŒå¸¸åˆ©ç›Š - æ³•äººç¨'],
          correct: 1,
          explanation: 'ãƒ•ãƒªãƒ¼ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ•ãƒ­ãƒ¼ï¼ˆFCFï¼‰ã¯ã€ä¼æ¥­ãŒäº‹æ¥­æ´»å‹•ã‹ã‚‰ç”Ÿã¿å‡ºã™è‡ªç”±ã«ä½¿ãˆã‚‹ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ•ãƒ­ãƒ¼ã§ã™ã€‚ã€Œå–¶æ¥­åˆ©ç›ŠÃ—(1-ç¨ç‡) + æ¸›ä¾¡å„Ÿå´è²» - è¨­å‚™æŠ•è³‡ - é‹è»¢è³‡æœ¬å¢—åŠ é¡ã€ã§è¨ˆç®—ã•ã‚Œã¾ã™ã€‚ä¼æ¥­ä¾¡å€¤è©•ä¾¡ï¼ˆDCFæ³•ï¼‰ã®åŸºç¤ã¨ãªã‚‹é‡è¦ãªæŒ‡æ¨™ã§ã™ã€‚',
          keywords: ['FCF', 'ãƒ•ãƒªãƒ¼ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ•ãƒ­ãƒ¼', 'DCF', 'ä¼æ¥­ä¾¡å€¤']
        }
      ]
    },
    {
      id: 'hr',
      name: 'äººçš„è³‡æºç®¡ç†',
      icon: 'ğŸ‘¥',
      color: '#8B5CF6',
      bgColor: '#EDE9FE',
      desc: 'ãƒ¢ãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³ç†è«–ãƒ»ãƒªãƒ¼ãƒ€ãƒ¼ã‚·ãƒƒãƒ—ãªã©',
      progress: 0,
      totalQuestions: 15,
      questions: [
        {
          text: 'ãƒã‚ºãƒ­ãƒ¼ã®æ¬²æ±‚5æ®µéšèª¬ã§ã€æœ€ã‚‚ä¸Šä½ã«ä½ç½®ã™ã‚‹æ¬²æ±‚ã¯ã©ã‚Œã‹ã€‚',
          options: ['å®‰å…¨æ¬²æ±‚', 'æ‰¿èªæ¬²æ±‚', 'è‡ªå·±å®Ÿç¾æ¬²æ±‚', 'ç¤¾ä¼šçš„æ¬²æ±‚'],
          correct: 2,
          explanation: 'ãƒã‚ºãƒ­ãƒ¼ã®æ¬²æ±‚5æ®µéšèª¬ã¯ã€ä¸‹ä½ã‹ã‚‰â‘ ç”Ÿç†çš„æ¬²æ±‚ã€â‘¡å®‰å…¨æ¬²æ±‚ã€â‘¢ç¤¾ä¼šçš„æ¬²æ±‚ï¼ˆæ‰€å±ã¨æ„›ã®æ¬²æ±‚ï¼‰ã€â‘£æ‰¿èªæ¬²æ±‚ï¼ˆå°Šå³æ¬²æ±‚ï¼‰ã€â‘¤è‡ªå·±å®Ÿç¾æ¬²æ±‚ã®é †ã«éšå±¤åŒ–ã•ã‚Œã¾ã™ã€‚ä¸‹ä½ã®æ¬²æ±‚ãŒæº€ãŸã•ã‚Œã‚‹ã¨ä¸Šä½ã®æ¬²æ±‚ãŒé¡•åœ¨åŒ–ã™ã‚‹ã¨ã•ã‚Œã€è‡ªå·±å®Ÿç¾æ¬²æ±‚ãŒæœ€ä¸Šä½ã«ä½ç½®ã—ã¾ã™ã€‚',
          keywords: ['ãƒã‚ºãƒ­ãƒ¼', 'æ¬²æ±‚5æ®µéšèª¬', 'è‡ªå·±å®Ÿç¾', 'å‹•æ©Ÿã¥ã‘ç†è«–']
        },
        {
          text: 'ãƒãƒ¼ã‚ºãƒãƒ¼ã‚°ã®äºŒè¦å› ç†è«–ã§ã€Œå‹•æ©Ÿã¥ã‘è¦å› ã€ã«è©²å½“ã™ã‚‹ã®ã¯ã©ã‚Œã‹ã€‚',
          options: ['çµ¦ä¸', 'ä½œæ¥­æ¡ä»¶', 'é”æˆæ„Ÿ', 'ä¼šç¤¾ã®æ–¹é‡'],
          correct: 2,
          explanation: 'ãƒãƒ¼ã‚ºãƒãƒ¼ã‚°ã®äºŒè¦å› ç†è«–ã§ã¯ã€ä»•äº‹ã¸ã®æº€è¶³ã«é–¢ã‚ã‚‹ã€Œå‹•æ©Ÿã¥ã‘è¦å› ã€ã¨ä¸æº€è¶³ã«é–¢ã‚ã‚‹ã€Œè¡›ç”Ÿè¦å› ã€ã‚’åŒºåˆ¥ã—ã¾ã™ã€‚å‹•æ©Ÿã¥ã‘è¦å› ã«ã¯é”æˆæ„Ÿã€æ‰¿èªã€ä»•äº‹ãã®ã‚‚ã®ã€è²¬ä»»ã€æˆé•·ãªã©ãŒå«ã¾ã‚Œã¾ã™ã€‚çµ¦ä¸ã€ä½œæ¥­æ¡ä»¶ã€ä¼šç¤¾ã®æ–¹é‡ã¯è¡›ç”Ÿè¦å› ã§ã€ä¸è¶³ã™ã‚‹ã¨ä¸æº€ã‚’ç”Ÿã˜ã¾ã™ãŒã€å……è¶³ã—ã¦ã‚‚ç©æ¥µçš„ãªå‹•æ©Ÿã¥ã‘ã«ã¯ãªã‚Šã¾ã›ã‚“ã€‚',
          keywords: ['ãƒãƒ¼ã‚ºãƒãƒ¼ã‚°', 'äºŒè¦å› ç†è«–', 'å‹•æ©Ÿã¥ã‘è¦å› ', 'è¡›ç”Ÿè¦å› ']
        },
        {
          text: 'ãƒã‚¯ãƒ¬ã‚¬ãƒ¼ã®Xç†è«–ã«ãŠã‘ã‚‹äººé–“è¦³ã¨ã—ã¦æ­£ã—ã„ã®ã¯ã©ã‚Œã‹ã€‚',
          options: [
            'äººã¯æœ¬æ¥ã€ä»•äº‹ãŒå¥½ãã§ã‚ã‚‹',
            'äººã¯è‡ªã‚‰ç›®æ¨™ã«å‘ã‹ã£ã¦åŠªåŠ›ã™ã‚‹',
            'äººã¯ç”Ÿã¾ã‚Œã¤ãä»•äº‹ãŒå«Œã„ã§ã€å¼·åˆ¶ã•ã‚Œãªã„ã¨åƒã‹ãªã„',
            'äººã¯å‰µé€ æ€§ã‚’ç™ºæ®ã—ã¦å•é¡Œè§£æ±ºã«å–ã‚Šçµ„ã‚€'
          ],
          correct: 2,
          explanation: 'ãƒã‚¯ãƒ¬ã‚¬ãƒ¼ã®Xç†è«–ã¯ã€ã€Œäººã¯æœ¬æ¥æ€ æƒ°ã§ã€å¼·åˆ¶ãƒ»çµ±åˆ¶ãƒ»å‘½ä»¤ãŒãªã„ã¨åƒã‹ãªã„ã€ã¨ã„ã†æ€§æ‚ªèª¬çš„ãªäººé–“è¦³ã«åŸºã¥ãã¾ã™ã€‚ä¸€æ–¹ã€Yç†è«–ã¯ã€Œäººã¯æ¡ä»¶æ¬¡ç¬¬ã§è‡ªã‚‰é€²ã‚“ã§è²¬ä»»ã‚’å¼•ãå—ã‘ã€å‰µé€ æ€§ã‚’ç™ºæ®ã™ã‚‹ã€ã¨ã„ã†æ€§å–„èª¬çš„ãªäººé–“è¦³ã§ã™ã€‚ç¾ä»£ã®çµŒå–¶ã§ã¯Yç†è«–ã«åŸºã¥ããƒãƒã‚¸ãƒ¡ãƒ³ãƒˆãŒæ¨å¥¨ã•ã‚Œã¦ã„ã¾ã™ã€‚',
          keywords: ['Xç†è«–', 'Yç†è«–', 'ãƒã‚¯ãƒ¬ã‚¬ãƒ¼', 'äººé–“è¦³']
        },
        {
          text: 'OJTï¼ˆOn the Job Trainingï¼‰ã®èª¬æ˜ã¨ã—ã¦æ­£ã—ã„ã®ã¯ã©ã‚Œã‹ã€‚',
          options: [
            'å¤–éƒ¨ã®ç ”ä¿®æ©Ÿé–¢ã§è¡Œã†æ•™è‚²è¨“ç·´',
            'è·å ´å†…ã§ä¸Šå¸ã‚„å…ˆè¼©ãŒå®Ÿå‹™ã‚’é€šã˜ã¦æŒ‡å°ã™ã‚‹æ•™è‚²è¨“ç·´',
            'è‡ªå·±å•“ç™ºã®ãŸã‚ã«è‡ªè²»ã§è¡Œã†å­¦ç¿’',
            'e-ãƒ©ãƒ¼ãƒ‹ãƒ³ã‚°ã«ã‚ˆã‚‹é éš”æ•™è‚²'
          ],
          correct: 1,
          explanation: 'OJTï¼ˆOn the Job Trainingï¼‰ã¯ã€è·å ´å†…ã§å®Ÿéš›ã®æ¥­å‹™ã‚’é€šã˜ã¦ã€ä¸Šå¸ã‚„å…ˆè¼©ç¤¾å“¡ãŒéƒ¨ä¸‹ã‚„å¾Œè¼©ã«å¯¾ã—ã¦å¿…è¦ãªçŸ¥è­˜ã‚„ã‚¹ã‚­ãƒ«ã‚’æŒ‡å°ã™ã‚‹æ•™è‚²è¨“ç·´æ–¹æ³•ã§ã™ã€‚å®Ÿè·µçš„ãªã‚¹ã‚­ãƒ«ãŒèº«ã«ã¤ãã‚„ã™ãã€ã‚³ã‚¹ãƒˆãŒä½ã„ã¨ã„ã†ãƒ¡ãƒªãƒƒãƒˆãŒã‚ã‚Šã¾ã™ã€‚ä¸€æ–¹ã€Off-JTï¼ˆOff the Job Trainingï¼‰ã¯è·å ´å¤–ã§è¡Œã†é›†åˆç ”ä¿®ãªã©ã‚’æŒ‡ã—ã¾ã™ã€‚',
          keywords: ['OJT', 'Off-JT', 'äººæè‚²æˆ', 'æ•™è‚²è¨“ç·´']
        },
        {
          text: '360åº¦è©•ä¾¡ï¼ˆå¤šé¢è©•ä¾¡ï¼‰ã®èª¬æ˜ã¨ã—ã¦æ­£ã—ã„ã®ã¯ã©ã‚Œã‹ã€‚',
          options: [
            'ä¸Šå¸ã®ã¿ãŒéƒ¨ä¸‹ã‚’è©•ä¾¡ã™ã‚‹æ–¹æ³•',
            'ä¸Šå¸ãƒ»åŒåƒšãƒ»éƒ¨ä¸‹ãªã©è¤‡æ•°ã®è¦–ç‚¹ã‹ã‚‰è©•ä¾¡ã™ã‚‹æ–¹æ³•',
            'å¹´ã«360æ—¥è©•ä¾¡ã‚’è¡Œã†æ–¹æ³•',
            'å…¨ç¤¾å“¡ã‚’ä¸€æ–‰ã«åºåˆ—åŒ–ã™ã‚‹æ–¹æ³•'
          ],
          correct: 1,
          explanation: '360åº¦è©•ä¾¡ã¯ã€ä¸Šå¸ã ã‘ã§ãªãã€åŒåƒšã€éƒ¨ä¸‹ã€ã•ã‚‰ã«ã¯å–å¼•å…ˆãªã©ã€å¤šæ–¹å‘ï¼ˆ360åº¦ï¼‰ã‹ã‚‰å¯¾è±¡è€…ã‚’è©•ä¾¡ã™ã‚‹æ‰‹æ³•ã§ã™ã€‚å¤šè§’çš„ãªè¦–ç‚¹ã‹ã‚‰ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ãŒå¾—ã‚‰ã‚Œã‚‹ãŸã‚ã€è©•ä¾¡ã®å®¢è¦³æ€§ãƒ»å…¬å¹³æ€§ãŒé«˜ã¾ã‚Šã¾ã™ã€‚ãŸã ã—ã€é‹ç”¨ã‚³ã‚¹ãƒˆãŒé«˜ãã€è©•ä¾¡è€…ã®ä¸»è¦³ãŒå…¥ã‚Šã‚„ã™ã„ã¨ã„ã†èª²é¡Œã‚‚ã‚ã‚Šã¾ã™ã€‚',
          keywords: ['360åº¦è©•ä¾¡', 'å¤šé¢è©•ä¾¡', 'äººäº‹è©•ä¾¡', 'ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯']
        }
      ]
    },
    {
      id: 'org',
      name: 'çµ„ç¹”è¡Œå‹•ãƒ»ãƒªãƒ¼ãƒ€ãƒ¼ã‚·ãƒƒãƒ—',
      icon: 'ğŸ¢',
      color: '#F59E0B',
      bgColor: '#FEF3C7',
      desc: 'çµ„ç¹”æ§‹é€ ãƒ»æ„æ€æ±ºå®šãƒ»çµ„ç¹”æ–‡åŒ–ãªã©',
      progress: 45,
      totalQuestions: 15,
      questions: [
        {
          text: 'æ©Ÿèƒ½åˆ¥çµ„ç¹”ã®ç‰¹å¾´ã¨ã—ã¦æœ€ã‚‚é©åˆ‡ãªã®ã¯ã©ã‚Œã‹ã€‚',
          options: [
            'å„äº‹æ¥­éƒ¨ãŒç‹¬ç«‹ã—ã¦æ„æ€æ±ºå®šã‚’è¡Œã†',
            'åŒã˜å°‚é–€æ©Ÿèƒ½ã”ã¨ã«éƒ¨é–€ã‚’ç·¨æˆã™ã‚‹',
            'ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã”ã¨ã«ãƒãƒ¼ãƒ ã‚’çµ„æˆã™ã‚‹',
            'åœ°åŸŸåˆ¥ã«çµ„ç¹”ã‚’åˆ†ã‘ã‚‹'
          ],
          correct: 1,
          explanation: 'æ©Ÿèƒ½åˆ¥çµ„ç¹”ã¯ã€å–¶æ¥­ã€è£½é€ ã€çµŒç†ã€äººäº‹ãªã©ã€åŒã˜å°‚é–€æ©Ÿèƒ½ã”ã¨ã«éƒ¨é–€ã‚’ç·¨æˆã™ã‚‹çµ„ç¹”å½¢æ…‹ã§ã™ã€‚å°‚é–€æ€§ã®å‘ä¸Šã‚„è¦æ¨¡ã®çµŒæ¸ˆãŒå¾—ã‚„ã™ã„ä¸€æ–¹ã€éƒ¨é–€é–“ã®èª¿æ•´ãŒé›£ã—ãã€ã‚»ã‚¯ã‚·ãƒ§ãƒŠãƒªã‚ºãƒ ãŒç”Ÿã˜ã‚„ã™ã„ã¨ã„ã†ç‰¹å¾´ãŒã‚ã‚Šã¾ã™ã€‚äº‹æ¥­éƒ¨åˆ¶çµ„ç¹”ã¯å„äº‹æ¥­éƒ¨ãŒç‹¬ç«‹çš„ã«é‹å–¶ã•ã‚Œã‚‹å½¢æ…‹ã§ã™ã€‚',
          keywords: ['æ©Ÿèƒ½åˆ¥çµ„ç¹”', 'äº‹æ¥­éƒ¨åˆ¶', 'çµ„ç¹”æ§‹é€ ', 'ã‚»ã‚¯ã‚·ãƒ§ãƒŠãƒªã‚ºãƒ ']
        },
        {
          text: 'ãƒãƒˆãƒªã‚¯ã‚¹çµ„ç¹”ã®æœ€å¤§ã®èª²é¡Œã¯ã©ã‚Œã‹ã€‚',
          options: [
            'å°‚é–€æ€§ãŒæ´»ã‹ã›ãªã„',
            'å‘½ä»¤ç³»çµ±ã®äºŒé‡åŒ–ï¼ˆãƒ„ãƒ¼ãƒœã‚¹å•é¡Œï¼‰',
            'ç’°å¢ƒå¤‰åŒ–ã«å¯¾å¿œã§ããªã„',
            'è¦æ¨¡ã®çµŒæ¸ˆãŒå¾—ã‚‰ã‚Œãªã„'
          ],
          correct: 1,
          explanation: 'ãƒãƒˆãƒªã‚¯ã‚¹çµ„ç¹”ã¯ã€æ©Ÿèƒ½åˆ¥çµ„ç¹”ã¨ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå‹çµ„ç¹”ã‚’çµ„ã¿åˆã‚ã›ãŸå½¢æ…‹ã§ã€ãƒ¡ãƒ³ãƒãƒ¼ã¯æ©Ÿèƒ½éƒ¨é–€ã®ä¸Šå¸ã¨ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ä¸Šå¸ã®ä¸¡æ–¹ã«å ±å‘Šã—ã¾ã™ã€‚ã“ã®ã€Œãƒ„ãƒ¼ãƒœã‚¹å•é¡Œã€ï¼ˆå‘½ä»¤ç³»çµ±ã®äºŒé‡åŒ–ï¼‰ãŒæœ€å¤§ã®èª²é¡Œã§ã‚ã‚Šã€æŒ‡ç¤ºã®çŸ›ç›¾ã‚„è²¬ä»»ã®æ›–æ˜§ã•ãŒç”Ÿã˜ã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚',
          keywords: ['ãƒãƒˆãƒªã‚¯ã‚¹çµ„ç¹”', 'ãƒ„ãƒ¼ãƒœã‚¹å•é¡Œ', 'å‘½ä»¤ç³»çµ±', 'çµ„ç¹”è¨­è¨ˆ']
        },
        {
          text: 'ãƒªãƒ¼ãƒ€ãƒ¼ã‚·ãƒƒãƒ—ã®PMç†è«–ã§ã€ŒPMå‹ã€ãƒªãƒ¼ãƒ€ãƒ¼ã®ç‰¹å¾´ã¯ã©ã‚Œã‹ã€‚',
          options: [
            'ç›®æ¨™é”æˆæ©Ÿèƒ½ã‚‚é›†å›£ç¶­æŒæ©Ÿèƒ½ã‚‚ä½ã„',
            'ç›®æ¨™é”æˆæ©Ÿèƒ½ãŒé«˜ãã€é›†å›£ç¶­æŒæ©Ÿèƒ½ãŒä½ã„',
            'ç›®æ¨™é”æˆæ©Ÿèƒ½ã‚‚é›†å›£ç¶­æŒæ©Ÿèƒ½ã‚‚é«˜ã„',
            'ç›®æ¨™é”æˆæ©Ÿèƒ½ãŒä½ãã€é›†å›£ç¶­æŒæ©Ÿèƒ½ãŒé«˜ã„'
          ],
          correct: 2,
          explanation: 'PMç†è«–ï¼ˆä¸‰éš…äºŒä¸äºŒï¼‰ã§ã¯ã€ãƒªãƒ¼ãƒ€ãƒ¼ã‚·ãƒƒãƒ—ã‚’Pæ©Ÿèƒ½ï¼ˆPerformanceï¼šç›®æ¨™é”æˆæ©Ÿèƒ½ï¼‰ã¨Mæ©Ÿèƒ½ï¼ˆMaintenanceï¼šé›†å›£ç¶­æŒæ©Ÿèƒ½ï¼‰ã®2è»¸ã§åˆ†é¡ã—ã¾ã™ã€‚PMå‹ã¯ä¸¡æ–¹ãŒé«˜ã„ç†æƒ³çš„ãªãƒªãƒ¼ãƒ€ãƒ¼ã‚·ãƒƒãƒ—ã‚¹ã‚¿ã‚¤ãƒ«ã§ã™ã€‚Pmå‹ã¯På„ªä½ã€pMå‹ã¯Må„ªä½ã€pmå‹ã¯ä¸¡æ–¹ä½ã„çŠ¶æ…‹ã‚’è¡¨ã—ã¾ã™ã€‚',
          keywords: ['PMç†è«–', 'ä¸‰éš…äºŒä¸äºŒ', 'ãƒªãƒ¼ãƒ€ãƒ¼ã‚·ãƒƒãƒ—', 'ç›®æ¨™é”æˆæ©Ÿèƒ½', 'é›†å›£ç¶­æŒæ©Ÿèƒ½']
        },
        {
          text: 'çµ„ç¹”ã«ãŠã‘ã‚‹ã€Œæš—é»™çŸ¥ã€ã®èª¬æ˜ã¨ã—ã¦æ­£ã—ã„ã®ã¯ã©ã‚Œã‹ã€‚',
          options: [
            'ãƒãƒ‹ãƒ¥ã‚¢ãƒ«ã‚„æ–‡æ›¸ã§æ˜ç¤ºåŒ–ã•ã‚ŒãŸçŸ¥è­˜',
            'å€‹äººã®çµŒé¨“ã‚„ç›´æ„Ÿã«åŸºã¥ãè¨€èªåŒ–ã—ã«ãã„çŸ¥è­˜',
            'ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«è“„ç©ã•ã‚ŒãŸçŸ¥è­˜',
            'æ³•å¾‹ã‚„è¦åˆ¶ã«é–¢ã™ã‚‹çŸ¥è­˜'
          ],
          correct: 1,
          explanation: 'æš—é»™çŸ¥ã¨ã¯ã€å€‹äººã®çµŒé¨“ã‚„å‹˜ã€ãƒã‚¦ãƒã‚¦ãªã©ã«åŸºã¥ãã€è¨€èªåŒ–ã‚„æ–‡æ›¸åŒ–ãŒé›£ã—ã„çŸ¥è­˜ã§ã™ã€‚é‡ä¸­éƒæ¬¡éƒã®SECIãƒ¢ãƒ‡ãƒ«ã§ã¯ã€æš—é»™çŸ¥ã¨å½¢å¼çŸ¥ï¼ˆæ˜ç¤ºåŒ–ã•ã‚ŒãŸçŸ¥è­˜ï¼‰ã®ç›¸äº’å¤‰æ›ã‚’é€šã˜ã¦çµ„ç¹”çš„ãªçŸ¥è­˜å‰µé€ ãŒè¡Œã‚ã‚Œã‚‹ã¨ã—ã¦ã„ã¾ã™ã€‚å…±åŒåŒ–â†’è¡¨å‡ºåŒ–â†’é€£çµåŒ–â†’å†…é¢åŒ–ã®ãƒ—ãƒ­ã‚»ã‚¹ã§çŸ¥è­˜ãŒå¤‰æ›ã•ã‚Œã¾ã™ã€‚',
          keywords: ['æš—é»™çŸ¥', 'å½¢å¼çŸ¥', 'SECIãƒ¢ãƒ‡ãƒ«', 'é‡ä¸­éƒæ¬¡éƒ', 'çŸ¥è­˜å‰µé€ ']
        },
        {
          text: 'ã‚³ãƒƒã‚¿ãƒ¼ã®å¤‰é©8æ®µéšãƒ¢ãƒ‡ãƒ«ã®ç¬¬1æ®µéšã¯ã©ã‚Œã‹ã€‚',
          options: [
            'ãƒ“ã‚¸ãƒ§ãƒ³ã¨æˆ¦ç•¥ã‚’ç”Ÿã¿å‡ºã™',
            'å±æ©Ÿæ„è­˜ã‚’é«˜ã‚ã‚‹',
            'å¤‰é©æ¨é€²ãƒãƒ¼ãƒ ã‚’ä½œã‚‹',
            'çŸ­æœŸçš„ãªæˆæœã‚’å®Ÿç¾ã™ã‚‹'
          ],
          correct: 1,
          explanation: 'ã‚¸ãƒ§ãƒ³ãƒ»ã‚³ãƒƒã‚¿ãƒ¼ã®å¤‰é©8æ®µéšãƒ¢ãƒ‡ãƒ«ã¯ã€â‘ å±æ©Ÿæ„è­˜ã‚’é«˜ã‚ã‚‹ã€â‘¡å¤‰é©æ¨é€²ãƒãƒ¼ãƒ ã‚’ä½œã‚‹ã€â‘¢ãƒ“ã‚¸ãƒ§ãƒ³ã¨æˆ¦ç•¥ã‚’ç”Ÿã¿å‡ºã™ã€â‘£ãƒ“ã‚¸ãƒ§ãƒ³ã‚’å‘¨çŸ¥ã™ã‚‹ã€â‘¤å¾“æ¥­å“¡ã®è‡ªç™ºçš„è¡Œå‹•ã‚’ä¿ƒã™ã€â‘¥çŸ­æœŸçš„ãªæˆæœã‚’å®Ÿç¾ã™ã‚‹ã€â‘¦æˆæœã‚’æ´»ã‹ã—ã¦ã•ã‚‰ã«å¤‰é©ã‚’æ¨é€²ã™ã‚‹ã€â‘§æ–°ã—ã„ã‚„ã‚Šæ–¹ã‚’æ–‡åŒ–ã¨ã—ã¦å®šç€ã•ã›ã‚‹ã€ã®8æ®µéšã§ã™ã€‚',
          keywords: ['ã‚³ãƒƒã‚¿ãƒ¼', 'å¤‰é©8æ®µéš', 'ãƒã‚§ãƒ³ã‚¸ãƒãƒã‚¸ãƒ¡ãƒ³ãƒˆ', 'å±æ©Ÿæ„è­˜']
        }
      ]
    }
  ];

  // ===== STATE =====
  let currentScreen = 'splash';
  let currentCategory = null;
  let currentQuestions = [];
  let currentQuestionIndex = 0;
  let userAnswers = [];
  let quizStartTime = null;
  let timerInterval = null;
  let currentExplainIndex = 0;

  // ===== NAVIGATION =====
  function navigateTo(screenId) {
    const current = document.querySelector('.screen.active');
    if (current) {
      current.classList.add('slide-out-left');
      current.classList.remove('active');
      setTimeout(() => {
        current.classList.remove('slide-out-left');
      }, 350);
    }

    const next = document.getElementById(screenId);
    setTimeout(() => {
      next.classList.add('active');
    }, 50);

    // Update status bar color
    const statusBar = document.getElementById('statusBar');
    if (['splash'].includes(screenId)) {
      statusBar.classList.add('light');
    } else {
      statusBar.classList.remove('light');
    }

    currentScreen = screenId;
  }

  // ===== SPLASH =====
  setTimeout(() => {
    navigateTo('home');
    renderCategories();
  }, 2500);

  // ===== RENDER CATEGORIES =====
  function renderCategories() {
    const list = document.getElementById('categoryList');
    list.innerHTML = categories.map(cat => `
      <div class="category-card" onclick="openCategory('${cat.id}')">
        <div class="category-icon" style="background: ${cat.bgColor}">
          ${cat.icon}
        </div>
        <div class="category-info">
          <div class="category-name">${cat.name}</div>
          <div class="category-meta">${cat.totalQuestions}å• Â· é€²æ— ${cat.progress}%</div>
          <div class="category-progress">
            <div class="category-progress-fill" style="width: ${cat.progress}%; background: ${cat.color}"></div>
          </div>
        </div>
        <span class="category-arrow">â€º</span>
      </div>
    `).join('');
  }

  // ===== OPEN CATEGORY =====
  function openCategory(categoryId) {
    currentCategory = categories.find(c => c.id === categoryId);
    document.getElementById('setupCategoryIcon').style.background = currentCategory.bgColor;
    document.getElementById('setupCategoryIcon').textContent = currentCategory.icon;
    document.getElementById('setupCategoryName').textContent = currentCategory.name;
    document.getElementById('setupCategoryDesc').textContent = currentCategory.desc;
    navigateTo('quiz-setup');
  }

  // ===== DAILY CHALLENGE =====
  function startDaily() {
    // Pick random questions from all categories
    currentCategory = { name: 'ä»Šæ—¥ã®ãƒãƒ£ãƒ¬ãƒ³ã‚¸', icon: 'âš¡', color: '#F59E0B' };
    currentQuestions = [];
    categories.forEach(cat => {
      const q = cat.questions[Math.floor(Math.random() * cat.questions.length)];
      currentQuestions.push({ ...q, categoryName: cat.name });
    });
    startQuizWithQuestions();
  }

  // ===== CHIP SELECTION =====
  document.addEventListener('click', (e) => {
    if (e.target.classList.contains('option-chip')) {
      const parent = e.target.closest('.option-chips');
      parent.querySelectorAll('.option-chip').forEach(c => c.classList.remove('selected'));
      e.target.classList.add('selected');
    }
  });

  // ===== START QUIZ =====
  function startQuiz() {
    currentQuestions = currentCategory.questions.map(q => ({ ...q, categoryName: currentCategory.name }));
    startQuizWithQuestions();
  }

  function startQuizWithQuestions() {
    currentQuestionIndex = 0;
    userAnswers = [];
    quizStartTime = Date.now();
    startTimer();
    renderQuestion();
    navigateTo('quiz');
  }

  // ===== TIMER =====
  function startTimer() {
    clearInterval(timerInterval);
    timerInterval = setInterval(() => {
      const elapsed = Math.floor((Date.now() - quizStartTime) / 1000);
      const mins = Math.floor(elapsed / 60);
      const secs = elapsed % 60;
      document.getElementById('quizTimer').textContent = `â± ${mins}:${secs.toString().padStart(2, '0')}`;
    }, 1000);
  }

  // ===== RENDER QUESTION =====
  function renderQuestion() {
    const q = currentQuestions[currentQuestionIndex];
    const total = currentQuestions.length;
    const progress = ((currentQuestionIndex) / total) * 100;

    document.getElementById('quizProgressText').textContent = `å•é¡Œ ${currentQuestionIndex + 1} / ${total}`;
    document.getElementById('quizProgressFill').style.width = `${progress}%`;
    document.getElementById('questionCategoryTag').textContent = q.categoryName;
    document.getElementById('questionText').textContent = q.text;

    const labels = ['A', 'B', 'C', 'D'];
    document.getElementById('answerOptions').innerHTML = q.options.map((opt, i) => `
      <div class="answer-option" data-index="${i}" onclick="selectAnswer(${i})">
        <span class="answer-label">${labels[i]}</span>
        <span>${opt}</span>
      </div>
    `).join('');

    document.getElementById('feedbackBanner').classList.remove('show');
    document.getElementById('feedbackBanner').className = 'feedback-banner';
    document.getElementById('nextBtn').disabled = true;
    document.getElementById('nextBtn').textContent = 
      currentQuestionIndex === total - 1 ? 'çµæœã‚’è¦‹ã‚‹' : 'æ¬¡ã®å•é¡Œã¸';

    // Scroll to top
    document.getElementById('quizBody').scrollTop = 0;
  }

  // ===== SELECT ANSWER =====
  function selectAnswer(index) {
    const q = currentQuestions[currentQuestionIndex];
    if (userAnswers[currentQuestionIndex] !== undefined) return; // Already answered

    userAnswers[currentQuestionIndex] = index;
    const isCorrect = index === q.correct;

    // Highlight answers
    const options = document.querySelectorAll('#answerOptions .answer-option');
    options.forEach((opt, i) => {
      if (i === q.correct) opt.classList.add('correct');
      if (i === index && !isCorrect) opt.classList.add('incorrect');
      if (i === index) opt.classList.add('selected');
    });

    // Show feedback
    const banner = document.getElementById('feedbackBanner');
    banner.classList.add('show');
    if (isCorrect) {
      banner.classList.add('correct');
      document.getElementById('feedbackIcon').textContent = 'âœ…';
      document.getElementById('feedbackText').textContent = 'æ­£è§£ï¼ã‚ˆãã§ãã¾ã—ãŸï¼';
    } else {
      banner.classList.add('incorrect');
      document.getElementById('feedbackIcon').textContent = 'âŒ';
      document.getElementById('feedbackText').textContent = `ä¸æ­£è§£... æ­£è§£ã¯ã€Œ${q.options[q.correct]}ã€`;
    }

    document.getElementById('nextBtn').disabled = false;
  }

  // ===== NEXT QUESTION =====
  function nextQuestion() {
    if (currentQuestionIndex < currentQuestions.length - 1) {
      currentQuestionIndex++;
      renderQuestion();
    } else {
      finishQuiz();
    }
  }

  // ===== FINISH QUIZ =====
  function finishQuiz() {
    clearInterval(timerInterval);
    const elapsed = Math.floor((Date.now() - quizStartTime) / 1000);
    const mins = Math.floor(elapsed / 60);
    const secs = elapsed % 60;
    const timeStr = `${mins}:${secs.toString().padStart(2, '0')}`;

    const total = currentQuestions.length;
    const correctCount = userAnswers.filter((a, i) => a === currentQuestions[i].correct).length;
    const incorrectCount = total - correctCount;
    const percentage = Math.round((correctCount / total) * 100);

    // Set result data
    let emoji, title;
    if (percentage >= 80) { emoji = 'ğŸ‰'; title = 'ã™ã°ã‚‰ã—ã„ï¼'; }
    else if (percentage >= 60) { emoji = 'ğŸ‘'; title = 'ã‚ˆãã§ãã¾ã—ãŸï¼'; }
    else if (percentage >= 40) { emoji = 'ğŸ’ª'; title = 'ã‚‚ã†å°‘ã—é ‘å¼µã‚ã†ï¼'; }
    else { emoji = 'ğŸ“–'; title = 'å¾©ç¿’ã—ã¾ã—ã‚‡ã†ï¼'; }

    document.getElementById('resultEmoji').textContent = emoji;
    document.getElementById('resultTitle').textContent = title;
    document.getElementById('resultScore').textContent = `${percentage}%`;
    document.getElementById('resultScoreLabel').textContent = `${correctCount} / ${total} å•æ­£è§£`;
    document.getElementById('resultCorrectCount').textContent = correctCount;
    document.getElementById('resultIncorrectCount').textContent = incorrectCount;
    document.getElementById('resultTime').textContent = timeStr;

    // Render question results
    document.getElementById('resultQuestionList').innerHTML = currentQuestions.map((q, i) => {
      const isCorrect = userAnswers[i] === q.correct;
      return `
        <div class="result-question-item" onclick="showExplanation(${i})">
          <div class="rq-status ${isCorrect ? 'correct' : 'incorrect'}">
            ${isCorrect ? 'âœ…' : 'âŒ'}
          </div>
          <div class="rq-text">${q.text}</div>
          <span class="rq-arrow">â€º</span>
        </div>
      `;
    }).join('');

    navigateTo('result');

    // Confetti for good score
    if (percentage >= 60) {
      showConfetti();
    }
  }

  // ===== CONFETTI =====
  function showConfetti() {
    const container = document.getElementById('confettiContainer');
    container.innerHTML = '';
    const colors = ['#4F46E5', '#7C3AED', '#EF4444', '#10B981', '#F59E0B', '#EC4899'];
    for (let i = 0; i < 40; i++) {
      const confetti = document.createElement('div');
      confetti.classList.add('confetti');
      confetti.style.left = Math.random() * 100 + '%';
      confetti.style.background = colors[Math.floor(Math.random() * colors.length)];
      confetti.style.animationDelay = Math.random() * 2 + 's';
      confetti.style.animationDuration = (2 + Math.random() * 2) + 's';
      confetti.style.width = (6 + Math.random() * 8) + 'px';
      confetti.style.height = (6 + Math.random() * 8) + 'px';
      container.appendChild(confetti);
    }
  }

  // ===== EXPLANATION =====
  function showExplanation(index) {
    currentExplainIndex = index;
    renderExplanation();
    navigateTo('explanation');
  }

  function renderExplanation() {
    const q = currentQuestions[currentExplainIndex];
    const userAnswer = userAnswers[currentExplainIndex];
    const isCorrect = userAnswer === q.correct;
    const labels = ['A', 'B', 'C', 'D'];

    // Nav dots
    document.getElementById('explainNav').innerHTML = currentQuestions.map((qq, i) => {
      const qCorrect = userAnswers[i] === qq.correct;
      return `<button class="explain-nav-dot ${qCorrect ? 'correct' : 'incorrect'} ${i === currentExplainIndex ? 'active' : ''}" 
        onclick="jumpToExplanation(${i})">${i + 1}</button>`;
    }).join('');

    // Content
    document.getElementById('explainContent').innerHTML = `
      <div class="explain-question-text">
        <strong>Q${currentExplainIndex + 1}.</strong> ${q.text}
      </div>
      <div class="explain-answer-status">
        <div class="explain-status-item your-answer ${isCorrect ? 'correct-answer-match' : ''}">
          <div class="explain-status-label">ã‚ãªãŸã®å›ç­”</div>
          <div class="explain-status-value">${labels[userAnswer]}. ${q.options[userAnswer]}</div>
        </div>
        ${!isCorrect ? `
        <div class="explain-status-item correct-answer">
          <div class="explain-status-label">æ­£è§£</div>
          <div class="explain-status-value">${labels[q.correct]}. ${q.options[q.correct]}</div>
        </div>` : ''}
      </div>
      <div class="explain-detail">
        <div class="explain-detail-title">ğŸ’¡ è§£èª¬</div>
        <div class="explain-detail-text">${q.explanation}</div>
      </div>
      <div class="explain-detail" style="background: var(--primary-bg);">
        <div class="explain-detail-title">ğŸ·ï¸ é–¢é€£ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰</div>
        <div style="margin-top: 8px;">
          ${q.keywords.map(k => `<span class="explain-keyword">${k}</span>`).join('')}
        </div>
      </div>
    `;

    // Button states
    document.getElementById('explainPrevBtn').disabled = currentExplainIndex === 0;
    const isLast = currentExplainIndex === currentQuestions.length - 1;
    document.getElementById('explainNextBtn').textContent = isLast ? 'çµæœã«æˆ»ã‚‹' : 'æ¬¡ã®å•é¡Œ â†’';
  }

  function navigateExplanation(direction) {
    if (direction === 1 && currentExplainIndex === currentQuestions.length - 1) {
      navigateTo('result');
      return;
    }
    currentExplainIndex += direction;
    currentExplainIndex = Math.max(0, Math.min(currentExplainIndex, currentQuestions.length - 1));
    renderExplanation();
  }

  function jumpToExplanation(index) {
    currentExplainIndex = index;
    renderExplanation();
  }

  // ===== CONFIRM QUIT =====
  function confirmQuit() {
    if (confirm('å­¦ç¿’ã‚’ä¸­æ–­ã—ã¾ã™ã‹ï¼Ÿ\né€”ä¸­çµŒéã¯ä¿å­˜ã•ã‚Œã¾ã›ã‚“ã€‚')) {
      clearInterval(timerInterval);
      navigateTo('home');
    }
  }
</script>

</body>
</html>
